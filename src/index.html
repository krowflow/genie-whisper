<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Genie Whisper</title>
  <link rel="stylesheet" href="styles/main.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            indigo: {
              950: '#1e1b4b',
            },
          },
        },
      },
    }
  </script>
</head>
<body class="bg-indigo-950 text-white font-sans overflow-hidden">
  <div id="root" class="h-screen"></div>
  
  <!-- For development, we'll use a simple script to render our app -->
  <!-- In production, this would be replaced with bundled React code -->
  <script>
    // This is a placeholder for the React application
    // In a real build process, this would be replaced with the bundled React code
    document.addEventListener('DOMContentLoaded', () => {
      const root = document.getElementById('root');
      
      // Create a simple UI that mimics our React components
      root.innerHTML = `
        <div class="h-screen flex flex-col bg-indigo-950">
          <!-- Draggable title bar -->
          <div class="bg-indigo-950 p-2 flex justify-between items-center draggable">
            <div class="flex items-center">
              <h1 class="text-sm font-medium text-gray-400">Genie Whisper</h1>
            </div>
            <div class="flex space-x-2">
              <button id="settings-btn" class="text-gray-400 hover:text-cyan-400" title="Settings" aria-label="Settings">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                  <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319z"/>
                </svg>
              </button>
              <button id="minimize-btn" class="text-gray-400 hover:text-cyan-400" title="Minimize" aria-label="Minimize">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M14 8a1 1 0 0 1-1 1H3a1 1 0 0 1 0-2h10a1 1 0 0 1 1 1z"/>
                </svg>
              </button>
              <button id="close-btn" class="text-gray-400 hover:text-red-500" title="Close" aria-label="Close">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                </svg>
              </button>
            </div>
          </div>
          
          <!-- Main content -->
          <div class="flex-grow flex flex-col p-4">
            <!-- Main UI area with Genie on left, waveform in center, mic on right -->
            <div class="flex-grow flex flex-col justify-center">
              <!-- Waveform with Genie and Mic on sides -->
              <div class="flex items-center justify-between w-full">
                <!-- Genie Avatar on left -->
                <div class="w-1/4 flex justify-center" id="genie-container">
                  <div class="w-32 h-32 rounded-full bg-indigo-900 flex items-center justify-center">
                    <img src="../images/genie_without_background.png" alt="Genie" class="w-24 h-24 object-contain">
                  </div>
                </div>
                
                <!-- Waveform in center -->
                <div class="w-2/4" id="waveform-container">
                  <div class="h-24 rounded bg-transparent flex items-center justify-center space-x-1" id="waveform">
                    <!-- Waveform bars will be generated by JavaScript -->
                  </div>
                </div>
                
                <!-- Microphone button on right -->
                <div class="w-1/4 flex justify-center">
                  <div id="mic-button" class="cursor-pointer">
                    <div class="w-16 h-16 rounded-full bg-indigo-600 flex items-center justify-center">
                      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-cyan-400">
                        <path d="M12 15.5C14.21 15.5 16 13.71 16 11.5V6C16 3.79 14.21 2 12 2C9.79 2 8 3.79 8 6V11.5C8 13.71 9.79 15.5 12 15.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M4.34998 9.64999V11.35C4.34998 15.57 7.77998 19 12 19C16.22 19 19.65 15.57 19.65 11.35V9.64999" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 19V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Status text (small and subtle) -->
            <div class="text-center text-xs text-gray-500 mt-4">
              <p id="status">Ready</p>
            </div>
          </div>
        </div>
      `;
      
      // Create waveform bars
      const waveform = document.getElementById('waveform');
      if (waveform) {
        for (let i = 0; i < 32; i++) {
          const bar = document.createElement('div');
          bar.className = 'waveform-bar';
          
          // Randomly assign cyan or pink color
          const isCyan = Math.random() > 0.2; // 80% chance of cyan
          bar.classList.add(isCyan ? 'bg-cyan-400' : 'bg-pink-400');
          
          // Set initial height
          const initialHeight = Math.random() * 20 + 5; // Between 5px and 25px
          bar.style.height = `${initialHeight}px`;
          
          waveform.appendChild(bar);
        }
      }
      
      // Add event listeners
      const micButton = document.getElementById('mic-button');
      const genieContainer = document.getElementById('genie-container');
      let isListening = false;
      
      const toggleListening = () => {
        isListening = !isListening;
        
        // Update UI based on listening state
        if (isListening) {
          document.body.classList.add('listening');
          document.getElementById('status').textContent = 'Listening...';
          
          // Animate waveform bars
          animateWaveform();
        } else {
          document.body.classList.remove('listening');
          document.getElementById('status').textContent = 'Ready';
          
          // Stop waveform animation
          if (window.waveformAnimation) {
            cancelAnimationFrame(window.waveformAnimation);
          }
          
          // Reset waveform bars
          const bars = document.querySelectorAll('.waveform-bar');
          bars.forEach(bar => {
            bar.style.height = '5px';
          });
        }
      };
      
      const animateWaveform = () => {
        const bars = document.querySelectorAll('.waveform-bar');
        
        const animate = () => {
          bars.forEach(bar => {
            // Generate random heights for active visualization
            const height = Math.random() * 40 + 5; // Between 5px and 45px
            bar.style.height = `${height}px`;
            
            // Occasionally change color for some visual interest
            if (Math.random() < 0.05) { // 5% chance to change color
              const isCyan = bar.classList.contains('bg-cyan-400');
              if (isCyan) {
                bar.classList.remove('bg-cyan-400');
                bar.classList.add('bg-pink-400');
              } else {
                bar.classList.remove('bg-pink-400');
                bar.classList.add('bg-cyan-400');
              }
            }
          });
          
          window.waveformAnimation = requestAnimationFrame(animate);
        };
        
        animate();
      };
      
      if (micButton) {
        micButton.addEventListener('click', toggleListening);
      }
      
      if (genieContainer) {
        genieContainer.addEventListener('click', toggleListening);
      }
      
      // Handle window controls
      document.getElementById('close-btn')?.addEventListener('click', () => {
        if (window.api) {
          window.api.send('close-window');
        }
      });
      
      document.getElementById('minimize-btn')?.addEventListener('click', () => {
        if (window.api) {
          window.api.send('minimize-window');
        }
      });
      
      document.getElementById('settings-btn')?.addEventListener('click', () => {
        if (window.api) {
          window.api.send('show-settings');
        }
      });
    });
  </script>
</body>
</html>